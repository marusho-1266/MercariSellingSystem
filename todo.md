# メルカリ販売管理システム TODO リスト

## Phase 1: 基盤構築 🎀

### プロジェクト初期設定
- [x] プロジェクトのセットアップ
  - 詳細: GASプロジェクトの作成とGitHub連携
  - 依存関係: なし
  - 見積時間: 2時間
  - 優先度: 🔴
  - 完了: プロジェクト作成、デプロイ完了

- [x] 開発環境の構築
  - 詳細: claspの設定、ローカル開発環境の整備
  - 依存関係: プロジェクトセットアップ
  - 見積時間: 1時間
  - 優先度: 🔴
  - 完了: clasp設定、ファイル構成整備完了

### データベース設計
- [x] スプレッドシートの設計
  - 詳細: 
    - 商品マスタシート
    - 在庫管理シート
    - 販売管理シート
    - 財務管理シート
  - 依存関係: プロジェクト初期設定
  - 見積時間: 4時間
  - 優先度: 🔴
  - 完了: initialSetup関数で自動作成実装済み

### 基本CRUD操作の実装
- [x] 商品マスタCRUD
  - 詳細: 商品の登録・更新・削除・検索機能
  - 進捗: 登録・検索・更新・削除すべて実装済み
  - 依存関係: DB設計
  - 見積時間: 6時間
  - 優先度: 🔴

- [x] 在庫管理CRUD
  - 詳細: 在庫数・ステータスの管理機能
  - 進捗: 登録・検索・更新・削除すべて実装済み
  - 依存関係: 商品マスタCRUD
  - 見積時間: 4時間
  - 優先度: 🔴

## Phase 2: コア機能実装

### 在庫管理機能
- [x] 商品登録フォーム作成
  - 詳細: 商品情報入力UI実装、モーダル追加、GAS連携
  - 進捗: フロントエンド・GAS側連携ともに実装済み
  - 依存関係: 基本CRUD
  - 見積時間: 4時間
  - 優先度: 🔴

- [x] 在庫一覧機能
  - 詳細: 在庫管理シートの内容を一覧表示（商品マスタJOIN）、モーダルUI
  - 進捗: フロント・GASともに実装済み
  - 依存関係: 在庫管理CRUD
  - 見積時間: 3時間
  - 優先度: 🔴

- [x] 新規登録フロー
  - 詳細: 商品マスタ・在庫管理への新規登録（registerNewProduct）
  - 進捗: GAS側実装済み
  - 依存関係: 商品登録フォーム作成
  - 見積時間: 1時間
  - 優先度: 🟢

- [x] 出品登録フロー
  - 詳細: 在庫管理の在庫数減算・出品管理への追加（registerListing）
  - 進捗: GAS側実装済み
  - 依存関係: 新規登録フロー
  - 見積時間: 1時間
  - 優先度: 🟢

### 販売管理機能
- [x] 売上記録機能
  - 詳細: 販売情報の記録と更新、在庫連動
  - 進捗: GAS側実装済み
  - 依存関係: 在庫管理機能
  - 見積時間: 5時間
  - 優先度: 🔴

- [x] 取引ステータス管理
  - 詳細: 販売状況の追跡システム、在庫連動
  - 進捗: GAS側実装済み
  - 依存関係: 売上記録機能
  - 見積時間: 4時間
  - 優先度: 🔴

- [x] 販売一覧機能
  - 詳細: 販売管理シートの内容を一覧表示（商品マスタJOIN）、モーダルUI
  - 進捗: フロント・GASともに実装済み
  - 依存関係: 販売管理機能
  - 見積時間: 3時間
  - 優先度: 🔴

- [x] 販売登録フロー
  - 詳細: 出品管理の完了・販売管理への追加（registerSale）
  - 進捗: GAS側実装済み
  - 依存関係: 出品登録フロー
  - 見積時間: 1時間
  - 優先度: 🟢

## Phase 2.5: 出品管理機能 🆕

- [x] 出品管理シートのカラム設計
  - 詳細: 出品ID、商品ID、出品数、出品日、出品ステータス等を設計し@spreadsheet.mdに反映
  - 依存関係: 在庫管理シート設計
  - 見積時間: 1時間
  - 優先度: 🟢
  - 完了: 2024/06/10

- [x] GAS: 出品登録関数の実装（registerListing等）
  - 詳細: 在庫から出品情報を登録し、在庫数を減算するGAS関数を実装
  - 依存関係: 出品管理シート設計
  - 見積時間: 2時間
  - 優先度: 🔴
  - 完了: 2024/06/10

- [x] GAS: 出品一覧取得関数の実装（getListingList等）
  - 詳細: 出品管理シートの内容を一覧取得するGAS関数を実装
  - 依存関係: 出品管理シート設計
  - 見積時間: 1時間
  - 優先度: 🟢
  - 完了: 2024/06/10

- [x] index.html: 出品登録UIの実装
  - 詳細: 出品登録用のモーダルフォームを追加し、GAS関数と連携
  - 依存関係: GAS出品登録関数
  - 見積時間: 1.5時間
  - 優先度: 🟢
  - 完了: 2024/06/10

- [x] index.html: 出品一覧UIの実装
  - 詳細: 出品管理シートの内容をテーブル表示するUIを追加
  - 依存関係: GAS出品一覧取得関数
  - 見積時間: 1.5時間
  - 優先度: 🟢
  - 完了: 2024/06/10

- [ ] UIとGASの連携テスト
  - 詳細: 出品登録・一覧の一連の動作をテストし、データ整合性を確認
  - 依存関係: 上記すべて
  - 見積時間: 1時間
  - 優先度: 🟢

## Phase 2.6: 出品登録UIの選択肢改善 🆕

- [x] GAS: 出品可能な在庫一覧取得関数の実装（getListableInventory）
  - 詳細: 在庫管理シートから「ステータス＝出品可能」な商品ID・商品名を返すGAS関数を実装
  - 依存関係: 在庫管理シート設計
  - 見積時間: 1時間
  - 優先度: 🟢
  - 完了: 2024/06/10

- [x] index.html: 出品登録モーダルの商品ID欄をselect化
  - 詳細: GASから取得した出品可能商品リストを選択肢として表示、商品ID＋商品名でUX向上
  - 依存関係: GAS: getListableInventory関数
  - 見積時間: 1.5時間
  - 優先度: 🟢
  - 完了: 2024/06/10

- [x] submit時の値送信・バリデーション調整
  - 詳細: 選択した商品IDを正しく送信し、バリデーションもselect用に調整
  - 依存関係: 上記すべて
  - 見積時間: 0.5時間
  - 優先度: 🟢

- [ ] テスト＆進捗反映
  - 詳細: UI・GAS連携の動作テスト、@todo.md進捗反映
  - 依存関係: 上記すべて
  - 見積時間: 0.5時間
  - 優先度: 🟢

## Phase 2.7: 仕入管理機能 🆕

- [x] 仕入管理シート設計・追加
  - 詳細: 仕入ID、商品ID、仕入日、仕入数、仕入価格、ステータス、備考のカラム設計とシート追加
  - 見積時間: 1時間
  - 優先度: 🟢
  - 完了: 2024/06/11

- [~] GAS: registerPurchase（仕入登録）実装
  - 詳細: 仕入管理シートに履歴追加、在庫数加算、ステータス自動遷移
  - 見積時間: 2時間
  - 優先度: 🟢

- [ ] GAS: updatePurchase（仕入更新）実装
  - 詳細: 仕入管理シートの該当行編集、在庫数調整
  - 見積時間: 1.5時間
  - 優先度: 🟢

- [ ] GAS: deletePurchase（仕入削除）実装
  - 詳細: 仕入管理シートの該当行削除、在庫数調整
  - 見積時間: 1時間
  - 優先度: 🟢

- [ ] GAS: getPurchaseList（仕入リスト取得）実装
  - 詳細: 仕入管理シートの履歴一覧取得
  - 見積時間: 1時間
  - 優先度: 🟢

- [ ] index.html: 仕入登録フォームUI実装
  - 詳細: 商品ID選択、仕入日、仕入数、仕入価格、備考の入力フォーム
  - 見積時間: 1.5時間
  - 優先度: 🟢

- [ ] index.html: 仕入リスト表示UI実装
  - 詳細: 仕入履歴テーブル表示
  - 見積時間: 1.5時間
  - 優先度: 🟢

- [ ] 仕入登録時の在庫数・ステータス自動連動
  - 詳細: 仕入登録・更新・削除時に在庫管理シートと連動
  - 見積時間: 1時間
  - 優先度: 🟢

- [ ] バリデーション・エラーハンドリング実装
  - 詳細: 商品ID存在チェック、数値バリデーション、エラー表示
  - 見積時間: 1時間
  - 優先度: 🟢

- [ ] テスト＆進捗反映
  - 詳細: 仕入管理機能の一連の動作テスト、@todo.md進捗反映
  - 見積時間: 1時間
  - 優先度: 🟢

## Phase 3: UI実装

### ダッシュボード
- [x] メインダッシュボード
  - 詳細: 重要指標の表示画面
  - 進捗: フロント・GASともに実装済み
  - 依存関係: コア機能実装
  - 見積時間: 8時間
  - 優先度: 🔴

- [ ] グラフ表示機能
  - 詳細: 売上・在庫推移のグラフ化
  - 依存関係: メインダッシュボード
  - 見積時間: 6時間
  - 優先度: 🟡

## Phase 4: 自動化・最適化

### 自動更新処理
- [x] 在庫自動更新
  - 詳細: 販売時の在庫数自動更新
  - 進捗: GAS側自動更新関数実装済み
  - 依存関係: 販売管理機能
  - 見積時間: 3時間
  - 優先度: 🟢

- [ ] 定期レポート生成
  - 詳細: 日次/週次レポートの自動生成
  - 依存関係: ダッシュボード
  - 見積時間: 4時間
  - 優先度: 🟢

## Phase 5: テストと改善

### テスト実装
- [ ] 単体テスト作成
  - 詳細: 各機能の単体テスト
  - 依存関係: 各機能実装
  - 見積時間: 8時間
  - 優先度: 🔴

- [ ] 結合テスト実施
  - 詳細: 機能間の連携テスト
  - 依存関係: 単体テスト
  - 見積時間: 6時間
  - 優先度: 🔴

### 最適化
- [ ] パフォーマンス改善
  - 詳細: 処理速度の最適化
  - 依存関係: テスト完了
  - 見積時間: 8時間
  - 優先度: 🟢

### UI仕様統一・修正
- [x] 商品新規登録フォームのステータス選択肢を最新仕様（「出品可能」「仕入中」「在庫切れ」）に修正
  - 詳細: index.htmlのプルダウンをGAS側バリデーションと統一
  - 依存関係: 在庫管理CRUD, GAS側仕様
  - 見積時間: 0.5時間
  - 優先度: 🟢
  - 完了: 2024/06/10

- [~] index.html: 販売登録UIの実装
  - 詳細: 販売登録用のモーダルフォームを追加し、GAS関数（registerSale）と連携
  - 依存関係: GAS販売登録関数
  - 見積時間: 1.5時間
  - 優先度: 🟢
  - サブタスク:
    - [ ] 販売登録モーダルUI設計（出品ID選択、販売日、販売価格、手数料、送料、購入者情報、取引ステータス）
    - [ ] 「販売登録」ボタンを販売管理カードに追加
    - [ ] showSaleRegisterForm, submitSaleRegister等のJS関数追加
    - [ ] GAS registerSale関数との連携・バリデーション
    - [ ] UI・GAS連携テスト

- [x] index.html: 販売一覧UIの実装
  - 詳細: 販売管理シートの内容をテーブル表示するUIを追加し、GAS関数（getSalesList）と連携
  - 依存関係: GAS販売一覧取得関数
  - 見積時間: 1.5時間
  - 優先度: 🟢
  - 完了: 2024/06/10

- [ ] 進捗反映・タスク整理
  - 詳細: 完了タスクの[x]化、進行中タスクの[~]化、未着手タスクの[ ]化
  - 依存関係: 全タスク
  - 見積時間: 0.2時間
  - 優先度: 🟢 